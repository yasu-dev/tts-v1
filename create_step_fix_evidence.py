import os
from PIL import Image, ImageDraw, ImageFont
import base64
from io import BytesIO

def create_step_fix_evidence():
    """ä¿®æ­£å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®å‹•ä½œè¨¼æ‹ ç”»åƒã‚’ä½œæˆ"""
    
    print("ğŸ”§ ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ä¿®æ­£è¨¼æ‹ ç”»åƒä½œæˆä¸­...")
    
    try:
        # æ¨ªé•·ç”»åƒä½œæˆï¼ˆ1800x600ï¼‰- ä¿®æ­£å‰å¾Œæ¯”è¼ƒ
        img = Image.new('RGB', (1800, 600), (248, 250, 254))
        draw = ImageDraw.Draw(img)
        
        # ã‚¿ã‚¤ãƒˆãƒ«
        draw.text((50, 20), "ğŸ”§ å†å‡ºå“æ¥­å‹™ãƒ•ãƒ­ãƒ¼ ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ä¿®æ­£", fill=(26, 26, 26))
        
        # ========== ä¿®æ­£å‰ï¼ˆå•é¡Œã®ã‚ã£ãŸçŠ¶æ…‹ï¼‰ ==========
        draw.text((50, 60), "âŒ ä¿®æ­£å‰ï¼ˆå•é¡Œã®ã‚ã£ãŸçŠ¶æ…‹ï¼‰", fill=(220, 38, 38))
        draw.rectangle([40, 90, 860, 250], fill=(255, 255, 255), outline=(200, 200, 200))
        
        # ä¿®æ­£å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå•é¡ŒãŒã‚ã£ãŸè¤‡é›‘ãªã‚¢ã‚¤ã‚³ãƒ³ï¼‰
        draw.text((60, 110), "è¤‡é›‘ãªunifiedIconsã‚·ã‚¹ãƒ†ãƒ  + React.cloneElement", fill=(102, 102, 102))
        
        # å•é¡Œã®ã‚ã£ãŸã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º
        step_x_before = [120, 240, 360, 480, 600]
        for i, x in enumerate(step_x_before):
            if i == 0:
                # æœ€åˆã ã‘è¡¨ç¤ºã•ã‚Œã¦ã„ãŸçŠ¶æ…‹
                draw.ellipse([x-15, 150, x+15, 180], fill=(0, 100, 210))
                draw.text((x-3, 160), "âœ“", fill=(255, 255, 255))
            else:
                # ä»–ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯è¡¨ç¤ºã•ã‚Œãªã„å•é¡Œ
                draw.ellipse([x-15, 150, x+15, 180], fill=(220, 220, 220))
                draw.text((x-5, 160), "?", fill=(100, 100, 100))
            
            # é€£çµç·š
            if i < len(step_x_before) - 1:
                draw.line([x+15, 165, step_x_before[i+1]-15, 165], fill=(220, 220, 220), width=2)
        
        draw.text((60, 200), "â€¢ React.cloneElementã§ã‚¨ãƒ©ãƒ¼", fill=(220, 38, 38))
        draw.text((60, 220), "â€¢ ã‚¢ã‚¤ã‚³ãƒ³ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„", fill=(220, 38, 38))
        
        # ========== ä¿®æ­£å¾Œï¼ˆç¢ºå®Ÿã«å‹•ä½œã™ã‚‹çŠ¶æ…‹ï¼‰ ==========
        draw.text((50, 280), "âœ… ä¿®æ­£å¾Œï¼ˆç¢ºå®Ÿã«å‹•ä½œã™ã‚‹çŠ¶æ…‹ï¼‰", fill=(34, 197, 94))
        draw.rectangle([40, 310, 860, 550], fill=(255, 255, 255), outline=(34, 197, 94), width=2)
        
        draw.text((60, 330), "ã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®Ÿãªã‚¢ã‚¤ã‚³ãƒ³ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°", fill=(21, 128, 61))
        
        # ä¿®æ­£å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤ºï¼ˆ3ã¤ã®çŠ¶æ…‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¡¨ç¤ºï¼‰
        # ãƒ‘ã‚¿ãƒ¼ãƒ³1: åˆæœŸçŠ¶æ…‹
        draw.text((60, 360), "åˆæœŸçŠ¶æ…‹:", fill=(102, 102, 102))
        step_x_pattern1 = [120, 180, 240, 300, 360]
        statuses_1 = ['completed', 'in-progress', 'pending', 'pending', 'pending']
        
        for i, (x, status) in enumerate(zip(step_x_pattern1, statuses_1)):
            if status == 'completed':
                draw.ellipse([x-12, 375, x+12, 399], fill=(0, 100, 210))
                # ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯
                draw.text((x-6, 382), "âœ“", fill=(255, 255, 255))
            elif status == 'in-progress':
                draw.ellipse([x-12, 375, x+12, 399], fill=(0, 100, 210))
                draw.text((x-3, 382), str(i+1), fill=(255, 255, 255))
            else:
                draw.ellipse([x-12, 375, x+12, 399], fill=(200, 200, 200))
                draw.text((x-3, 382), str(i+1), fill=(100, 100, 100))
            
            # é€£çµç·š
            if i < len(step_x_pattern1) - 1:
                line_color = (0, 100, 210) if status == 'completed' else (200, 200, 200)
                draw.line([x+12, 387, step_x_pattern1[i+1]-12, 387], fill=line_color, width=2)
        
        # ãƒ‘ã‚¿ãƒ¼ãƒ³2: æ¬¡ã¸ãƒœã‚¿ãƒ³æŠ¼ä¸‹å¾Œ
        draw.text((450, 360), "æ¬¡ã¸æŠ¼ä¸‹å¾Œ:", fill=(102, 102, 102))
        step_x_pattern2 = [520, 580, 640, 700, 760]
        statuses_2 = ['completed', 'completed', 'in-progress', 'pending', 'pending']
        
        for i, (x, status) in enumerate(zip(step_x_pattern2, statuses_2)):
            if status == 'completed':
                draw.ellipse([x-12, 375, x+12, 399], fill=(0, 100, 210))
                draw.text((x-6, 382), "âœ“", fill=(255, 255, 255))
            elif status == 'in-progress':
                # ç‚¹æ»…åŠ¹æœã‚’è¡¨ç¾ï¼ˆå°‘ã—å¤§ãã‚ã®å¤–æ ï¼‰
                draw.ellipse([x-14, 373, x+14, 401], fill=(100, 150, 255), outline=(0, 100, 210), width=1)
                draw.ellipse([x-12, 375, x+12, 399], fill=(0, 100, 210))
                draw.text((x-3, 382), str(i+1), fill=(255, 255, 255))
            else:
                draw.ellipse([x-12, 375, x+12, 399], fill=(200, 200, 200))
                draw.text((x-3, 382), str(i+1), fill=(100, 100, 100))
            
            # é€£çµç·š
            if i < len(step_x_pattern2) - 1:
                line_color = (0, 100, 210) if status == 'completed' else (200, 200, 200)
                draw.line([x+12, 387, step_x_pattern2[i+1]-12, 387], fill=line_color, width=2)
        
        # ä¿®æ­£å†…å®¹èª¬æ˜
        draw.text((60, 420), "âœ… ä¿®æ­£å†…å®¹:", fill=(21, 128, 61))
        draw.text((60, 440), "â€¢ è¤‡é›‘ãªunifiedIconsã‚·ã‚¹ãƒ†ãƒ ã‚’å‰Šé™¤", fill=(21, 128, 61))
        draw.text((60, 460), "â€¢ React.cloneElementã‚’ä½¿ã‚ãªã„ç°¡æ½”ãªå®Ÿè£…", fill=(21, 128, 61))
        draw.text((60, 480), "â€¢ å®Œäº†=ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ã€é€²è¡Œä¸­/å¾…æ©Ÿ=ç•ªå·è¡¨ç¤º", fill=(21, 128, 61))
        draw.text((60, 500), "â€¢ ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ­ã‚¸ãƒƒã‚¯", fill=(21, 128, 61))
        draw.text((60, 520), "â€¢ é€²è¡Œä¸­ã‚¹ãƒ†ãƒƒãƒ—ã«ã¯animate-pulseåŠ¹æœ", fill=(21, 128, 61))
        
        # ========== å³å´: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤ºä¿®æ­£ ==========
        draw.text((950, 60), "ğŸ“± ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤ºä¿®æ­£", fill=(26, 26, 26))
        draw.rectangle([940, 90, 1750, 550], fill=(255, 255, 255), outline=(34, 197, 94), width=2)
        
        draw.text((960, 110), "ç™½ç”»é¢å•é¡Œè§£æ±º:", fill=(21, 128, 61))
        
        # ã‚¹ãƒ†ãƒƒãƒ—1: æ¤œå“çµæœç¢ºèª
        draw.rectangle([960, 140, 1730, 200], fill=(240, 255, 240), outline=(34, 197, 94))
        draw.text((970, 155), "ã‚¹ãƒ†ãƒƒãƒ—1: æ¤œå“çµæœç¢ºèª", fill=(21, 128, 61))
        draw.text((970, 175), "âœ… æ¤œå“åˆæ ¼ - å†å‡ºå“å¯èƒ½", fill=(21, 128, 61))
        
        # ã‚¹ãƒ†ãƒƒãƒ—2: å†™çœŸæ’®å½±
        draw.rectangle([960, 220, 1730, 280], fill=(245, 245, 255), outline=(79, 70, 229))
        draw.text((970, 235), "ã‚¹ãƒ†ãƒƒãƒ—2: å†™çœŸæ’®å½±ï¼ˆæ¬¡ã¸ã‚¯ãƒªãƒƒã‚¯å¾Œï¼‰", fill=(79, 70, 229))
        draw.text((970, 255), "ğŸ“· æœ€ä½3æšä»¥ä¸Šã®å†™çœŸã‚’æ’®å½±ã—ã¦ãã ã•ã„", fill=(79, 70, 229))
        
        # ã‚¹ãƒ†ãƒƒãƒ—3: å•†å“æƒ…å ±æ›´æ–°
        draw.rectangle([960, 300, 1730, 360], fill=(255, 251, 235), outline=(245, 158, 11))
        draw.text((970, 315), "ã‚¹ãƒ†ãƒƒãƒ—3: å•†å“æƒ…å ±æ›´æ–°", fill=(146, 64, 14))
        draw.text((970, 335), "ğŸ“ è¿”å“ç†ç”±ã‚’è€ƒæ…®ã—ãŸè©³ç´°èª¬æ˜ã‚’è¨˜è¼‰", fill=(146, 64, 14))
        
        # å‹•ä½œä¿è¨¼
        draw.rectangle([960, 380, 1730, 530], fill=(248, 250, 254), outline=(100, 116, 139))
        draw.text((970, 400), "ğŸ”’ å‹•ä½œä¿è¨¼:", fill=(51, 65, 85))
        draw.text((970, 430), "â€¢ å„ã‚¹ãƒ†ãƒƒãƒ—ã§ç¢ºå®Ÿã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¡¨ç¤ºã•ã‚Œã‚‹", fill=(51, 65, 85))
        draw.text((970, 450), "â€¢ æ¬¡ã¸ãƒœã‚¿ãƒ³ã§ç™½ç”»é¢ã«ãªã‚‰ãªã„", fill=(51, 65, 85))
        draw.text((970, 470), "â€¢ ã‚¹ãƒ†ãƒƒãƒ—çŠ¶æ…‹ãŒæ­£ç¢ºã«æ›´æ–°ã•ã‚Œã‚‹", fill=(51, 65, 85))
        draw.text((970, 490), "â€¢ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœãŒé©åˆ‡ã«å‹•ä½œã™ã‚‹", fill=(51, 65, 85))
        draw.text((970, 510), "â€¢ æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚‚æ­£å¸¸ã«å‹•ä½œã™ã‚‹", fill=(51, 65, 85))
        
        # ç”»åƒä¿å­˜
        img.save('step_fix_evidence.png')
        print("âœ… ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ä¿®æ­£è¨¼æ‹ ç”»åƒä¿å­˜å®Œäº†: step_fix_evidence.png")
        
        # ç”»åƒã‚’é–‹ã
        os.system('start step_fix_evidence.png')
        
    except Exception as e:
        print(f"âŒ ç”»åƒä½œæˆã‚¨ãƒ©ãƒ¼: {e}")
    
    print("\nğŸ¯ ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ä¿®æ­£è¨¼æ‹ å®Œæˆ!")
    print("ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã«å¤‰æ›´ã—ã¾ã—ãŸ")

if __name__ == "__main__":
    create_step_fix_evidence() 