<mxfile host="app.diagrams.net" modified="2025-10-18T08:35:00.000Z" agent="Claude Code" version="24.0.0">
  <diagram name="トリアージタッグシステム プロジェクト構成" id="tts-project-structure">
    <mxGraphModel dx="1600" dy="1100" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="トリアージタッグシステム&#xa;プロジェクト構成 v1.0" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontStyle=1;fontColor=#485563" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="600" height="60" as="geometry" />
        </mxCell>

        <!-- Root Directory -->
        <mxCell id="root" value="tts-v1/ (プロジェクトルート)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;verticalAlign=top;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="40" y="100" width="1520" height="1060" as="geometry" />
        </mxCell>

        <!-- App Directory (Main) -->
        <mxCell id="app-dir" value="app/ (Next.js 14 App Router)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;verticalAlign=top;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="140" width="740" height="580" as="geometry" />
        </mxCell>

        <!-- API Routes -->
        <mxCell id="api" value="api/ (API Routes)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#E87722;fontSize=13;fontStyle=1;verticalAlign=top;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="180" width="340" height="240" as="geometry" />
        </mxCell>

        <mxCell id="api-auth" value="auth/&#xa;認証API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="220" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-events" value="events/&#xa;災害イベント" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="210" y="220" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-triage" value="triage/&#xa;トリアージタグ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="220" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-areas" value="areas/&#xa;エリア管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="285" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-teams" value="teams/&#xa;隊・車両" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="210" y="285" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-hospitals" value="hospitals/&#xa;医療機関" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="320" y="285" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-ai" value="ai/&#xa;AI推論" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="350" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-sync" value="sync/&#xa;CRDT同期" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="210" y="350" width="90" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-audit" value="audit/&#xa;監査ログ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="320" y="350" width="90" height="50" as="geometry" />
        </mxCell>

        <!-- Pages/Routes (Authenticated) -->
        <mxCell id="routes" value="(authenticated)/ (認証が必要なルート)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=13;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="440" y="180" width="340" height="240" as="geometry" />
        </mxCell>

        <mxCell id="route-dashboard" value="dashboard/&#xa;指揮本部" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="220" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="route-triage" value="triage/&#xa;トリアージ入力" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="580" y="220" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="route-transport" value="transport/&#xa;搬送管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="285" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="route-hospital" value="hospital/&#xa;医療機関画面" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="580" y="285" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="route-audit" value="audit/&#xa;監査画面" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="350" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="route-settings" value="settings/&#xa;設定" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="580" y="350" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Components -->
        <mxCell id="components" value="components/ (共有コンポーネント)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=13;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="80" y="440" width="700" height="160" as="geometry" />
        </mxCell>

        <mxCell id="comp-ui" value="ui/&#xa;UIコンポーネント" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="100" y="480" width="110" height="50" as="geometry" />
        </mxCell>

        <mxCell id="comp-qr" value="QRScanner.tsx&#xa;QR読取" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="230" y="480" width="110" height="50" as="geometry" />
        </mxCell>

        <mxCell id="comp-voice" value="VoiceInput.tsx&#xa;音声入力" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="480" width="110" height="50" as="geometry" />
        </mxCell>

        <mxCell id="comp-wizard" value="StartTriageWizard.tsx&#xa;START法" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="480" width="130" height="50" as="geometry" />
        </mxCell>

        <mxCell id="comp-map" value="MapView.tsx&#xa;地図表示" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="480" width="110" height="50" as="geometry" />
        </mxCell>

        <mxCell id="comp-image" value="ImageUploader.tsx&#xa;画像アップロード" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="100" y="540" width="130" height="50" as="geometry" />
        </mxCell>

        <mxCell id="comp-error" value="ErrorBoundary.tsx&#xa;エラー処理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="540" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="comp-offline" value="OfflineHandler.tsx&#xa;オフライン処理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="390" y="540" width="130" height="50" as="geometry" />
        </mxCell>

        <!-- App Root Files -->
        <mxCell id="app-files" value="ルートファイル" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="80" y="620" width="220" height="90" as="geometry" />
        </mxCell>

        <mxCell id="app-files-list" value="layout.tsx&#xa;page.tsx&#xa;globals.css&#xa;loading.tsx&#xa;error.tsx" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="90" y="640" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Lib Directory -->
        <mxCell id="lib-dir" value="lib/ (ビジネスロジック・ユーティリティ)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="740" width="740" height="200" as="geometry" />
        </mxCell>

        <mxCell id="lib-auth" value="auth/&#xa;認証・RBAC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="780" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-sync" value="sync/&#xa;CRDT同期" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="780" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-ai" value="ai/&#xa;AI/ML" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="780" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-nlp" value="nlp/&#xa;音声解析" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="440" y="780" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-offline" value="offline/&#xa;オフライン処理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="780" width="110" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-hooks" value="hooks/&#xa;カスタムフック" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="845" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-utils" value="utils/&#xa;ユーティリティ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="220" y="845" width="110" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-types" value="types/&#xa;型定義" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="350" y="845" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-constants" value="constants/&#xa;定数" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="470" y="845" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="lib-validation" value="validation/&#xa;Zodスキーマ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="590" y="845" width="110" height="50" as="geometry" />
        </mxCell>

        <!-- Public Directory -->
        <mxCell id="public-dir" value="public/ (静的ファイル)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;verticalAlign=top;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="960" width="350" height="180" as="geometry" />
        </mxCell>

        <mxCell id="public-models" value="models/&#xa;AI/MLモデル" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="1000" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="public-sw" value="sw.js&#xa;Service Worker" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="1000" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="public-manifest" value="manifest.json&#xa;PWAマニフェスト" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="1065" width="130" height="50" as="geometry" />
        </mxCell>

        <mxCell id="public-static" value="favicon.ico&#xa;robots.txt&#xa;sitemap.xml" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="230" y="1065" width="110" height="50" as="geometry" />
        </mxCell>

        <!-- Docs Directory -->
        <mxCell id="docs-dir" value="docs/ (ドキュメント)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;verticalAlign=top;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="440" y="960" width="360" height="180" as="geometry" />
        </mxCell>

        <mxCell id="docs-spec" value="仕様.md&#xa;specification.html" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="1000" width="140" height="50" as="geometry" />
        </mxCell>

        <mxCell id="docs-arch" value="system-architecture.drawio" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="620" y="1000" width="160" height="50" as="geometry" />
        </mxCell>

        <mxCell id="docs-structure" value="project-structure.drawio" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="460" y="1065" width="150" height="50" as="geometry" />
        </mxCell>

        <mxCell id="docs-flow" value="triage-system-flow.drawio&#xa;presentation.html" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="1065" width="150" height="50" as="geometry" />
        </mxCell>

        <!-- Config and Tools (Right Side) -->
        <mxCell id="config-dir" value="設定ファイル・ツール" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="840" y="140" width="700" height="1000" as="geometry" />
        </mxCell>

        <!-- Config Files -->
        <mxCell id="config-main" value="主要設定ファイル" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=13;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="860" y="180" width="320" height="280" as="geometry" />
        </mxCell>

        <mxCell id="config-files" value="package.json&#xa;next.config.js&#xa;tsconfig.json&#xa;tailwind.config.js&#xa;postcss.config.js&#xa;playwright.config.ts&#xa;jest.config.js&#xa;middleware.ts&#xa;.env.example&#xa;.env.local&#xa;.gitignore" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=15;spacingTop=5;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="880" y="220" width="280" height="220" as="geometry" />
        </mxCell>

        <!-- Cursor Rules -->
        <mxCell id="cursor-dir" value=".cursor/ (開発ルール)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=13;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1200" y="180" width="320" height="280" as="geometry" />
        </mxCell>

        <mxCell id="cursor-rules" value="rules/dev-rules/&#xa;&#xa;・db-blueprint.mdc&#xa;　(データベース設計)&#xa;&#xa;・nextjs.mdc&#xa;　(Next.js開発規約)&#xa;&#xa;・techstack.mdc&#xa;　(技術スタック)&#xa;&#xa;・uiux.mdc&#xa;　(UI/UX規約)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=15;spacingTop=5;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1220" y="220" width="280" height="220" as="geometry" />
        </mxCell>

        <!-- Tech Stack -->
        <mxCell id="tech-stack-box" value="技術スタック一覧" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=13;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="860" y="480" width="320" height="320" as="geometry" />
        </mxCell>

        <mxCell id="tech-frontend" value="【フロントエンド】&#xa;・Next.js 14 App Router&#xa;・React 18 + TypeScript 5&#xa;・Tailwind CSS 3&#xa;・PWA (next-pwa)&#xa;・Yjs (CRDT)&#xa;・Mapbox GL JS&#xa;・html5-qrcode&#xa;・Web Speech API&#xa;・browser-image-compression" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=15;spacingTop=5;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="880" y="520" width="280" height="120" as="geometry" />
        </mxCell>

        <mxCell id="tech-backend" value="【バックエンド】&#xa;・Next.js API Routes&#xa;・Supabase (PostgreSQL 15)&#xa;・Supabase Auth (MFA)&#xa;・Supabase Storage&#xa;・Zod (バリデーション)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=15;spacingTop=5;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="880" y="655" width="280" height="70" as="geometry" />
        </mxCell>

        <mxCell id="tech-ai" value="【AI/ML】&#xa;・TensorFlow.js 4&#xa;・YOLOv8 (ONNX Runtime)&#xa;・NLP (音声解析)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=15;spacingTop=5;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="880" y="740" width="280" height="50" as="geometry" />
        </mxCell>

        <!-- Testing & Monitoring -->
        <mxCell id="testing-box" value="テスト・監視" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=13;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1200" y="480" width="320" height="170" as="geometry" />
        </mxCell>

        <mxCell id="testing-tools" value="・Playwright (E2E)&#xa;・Jest (ユニット)&#xa;・Sentry (エラー監視)&#xa;・Lighthouse (パフォーマンス)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=15;spacingTop=5;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1220" y="520" width="280" height="110" as="geometry" />
        </mxCell>

        <!-- Key Features -->
        <mxCell id="features-box" value="主要機能・特徴" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#E87722;fontSize=13;fontStyle=1;verticalAlign=top;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="670" width="320" height="300" as="geometry" />
        </mxCell>

        <mxCell id="features-list" value="✓ オフライン優先設計 (PWA)&#xa;✓ CRDT による競合解決&#xa;✓ QRコードスキャン&#xa;✓ 音声入力対応&#xa;✓ START法ウィザード&#xa;✓ AI画像解析 (ドローン)&#xa;✓ AI優先度判定&#xa;✓ リアルタイム同期 (WebSocket)&#xa;✓ 地図表示 (Mapbox)&#xa;✓ RLS + MFA認証&#xa;✓ 監査ログ (WORM)&#xa;✓ 画像圧縮・最適化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=15;spacingTop=5;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1220" y="710" width="280" height="240" as="geometry" />
        </mxCell>

        <!-- Database Schema -->
        <mxCell id="db-box" value="データモデル (Supabase PostgreSQL)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="860" y="820" width="320" height="140" as="geometry" />
        </mxCell>

        <mxCell id="db-tables" value="・events (災害イベント)&#xa;・triage_tags (トリアージタグ)&#xa;・geographic_areas (エリア)&#xa;・hospitals (医療機関)&#xa;・teams (隊・車両)&#xa;・user_roles (ユーザーロール)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=15;spacingTop=5;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="880" y="860" width="280" height="80" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="凡例" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#485563;fontSize=13;fontStyle=1;verticalAlign=top;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="860" y="980" width="660" height="150" as="geometry" />
        </mxCell>

        <mxCell id="legend-app" value="Appルート" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="880" y="1020" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-lib" value="ライブラリ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1000" y="1020" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-core" value="コア機能" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#E87722;fontSize=11;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1120" y="1020" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-offline" value="オフライン" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1240" y="1020" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-ai" value="AI/ML" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1360" y="1020" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-security" value="セキュリティ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="880" y="1065" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-config" value="設定・ツール" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1000" y="1065" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-static" value="静的ファイル" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1120" y="1065" width="100" height="30" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
