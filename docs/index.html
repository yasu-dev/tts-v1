<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE WORLD DOOR - フルフィルメントシステム 引き継ぎ資料</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-light);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
            padding: 40px 0;
            margin-bottom: 40px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .meta-info {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .meta-info h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .meta-item {
            padding: 12px;
            background: var(--bg-light);
            border-radius: 6px;
        }

        .meta-item strong {
            color: var(--text-secondary);
            font-size: 0.85rem;
            display: block;
            margin-bottom: 5px;
        }

        .meta-item span {
            color: var(--text-primary);
            font-size: 1rem;
        }

        .section {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        .section h3 {
            color: var(--text-primary);
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .doc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .doc-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
            background: white;
        }

        .doc-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }

        .doc-card h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .doc-card p {
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .doc-card .doc-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .doc-card .doc-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .doc-card a {
            display: inline-block;
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: background 0.3s ease;
        }

        .doc-card a:hover {
            background: #1d4ed8;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .tech-item {
            background: var(--bg-light);
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid var(--primary-color);
        }

        .tech-item h4 {
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .tech-item p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-completed {
            background: #d1fae5;
            color: #065f46;
        }

        .status-active {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-planned {
            background: #fef3c7;
            color: #92400e;
        }

        .feature-list {
            list-style: none;
            margin-top: 15px;
        }

        .feature-list li {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .feature-list li::before {
            content: "✓";
            color: var(--success-color);
            font-weight: bold;
            margin-right: 10px;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-info {
            background: #dbeafe;
            border-left: 4px solid #2563eb;
            color: #1e40af;
        }

        .alert-warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            color: #92400e;
        }

        .flow-diagram {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .flow-steps {
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
        }

        .flow-step {
            background: white;
            padding: 12px 20px;
            border-radius: 6px;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 500;
        }

        .flow-arrow {
            color: var(--text-secondary);
            font-size: 1.5rem;
        }

        footer {
            background: var(--text-primary);
            color: white;
            padding: 30px 0;
            margin-top: 50px;
            text-align: center;
        }

        @media print {
            body {
                background: white;
            }
            .section {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--border-color);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>🏢 THE WORLD DOOR</h1>
            <p>フルフィルメントシステム - プロジェクト引き継ぎ資料</p>
        </div>
    </header>

    <div class="container">
        <div class="meta-info">
            <h2>📋 プロジェクト基本情報</h2>
            <div class="meta-grid">
                <div class="meta-item">
                    <strong>プロジェクト名</strong>
                    <span>THE WORLD DOOR フルフィルメントシステム</span>
                </div>
                <div class="meta-item">
                    <strong>バージョン</strong>
                    <span>v2.0 (fbt-v2)</span>
                </div>
                <div class="meta-item">
                    <strong>最終更新日</strong>
                    <span>2025年10月3日</span>
                </div>
                <div class="meta-item">
                    <strong>開発環境</strong>
                    <span>Next.js 14.2.5 + TypeScript</span>
                </div>
                <div class="meta-item">
                    <strong>データベース</strong>
                    <span>Prisma 5.7.0 + SQLite</span>
                </div>
                <div class="meta-item">
                    <strong>ステータス</strong>
                    <span class="status-badge status-active">開発環境稼働中</span>
                </div>
            </div>
        </div>

        <div class="alert alert-info">
            <strong>📌 このドキュメントについて</strong><br>
            本ページは「引き継ぎに実用的な最小限の資料」に絞り込んだランディングです。詳細仕様・網羅情報は <code>docs/system-architecture-audit.html</code> と各 drawio を参照してください。
        </div>

        <div class="section">
            <h2>🎯 プロジェクト概要</h2>
            <p>高級中古品（カメラ・時計）の物流・販売代行サービスを提供する統合型フルフィルメントシステムです。商品の入荷から検品、保管、出品、発送、配送までのライフサイクル全体を管理します。</p>

            <div class="flow-diagram">
                <h3>商品フロー</h3>
                <div class="flow-steps">
                    <div class="flow-step">入荷</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">検品</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">保管</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">出品</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">受注</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">ピッキング</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">梱包</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">発送</div>
                </div>
            </div>

            <h3>主な機能</h3>
            <ul class="feature-list">
                <li>商品管理（入荷→検品→保管→出品→受注→ピッキング→梱包→ラベル貼付→出荷→配送）</li>
                <li>在庫管理（バーコードスキャン、ロケーション管理 Zone-Row-Shelf形式）</li>
                <li>階層的検品システム（カテゴリ別チェックリスト、画像・動画記録）</li>
                <li>出品・販売管理（eBay連携、テンプレート管理）</li>
                <li>配送・物流管理（納品プラン、FedEx連携、複数配送業者対応）</li>
                <li>アクティビティログ（全操作履歴の記録・追跡）</li>
                <li>リアルタイム通知（Socket.io、メール通知）</li>
                <li>スタッフ管理（ロールベースアクセス制御）</li>
                <li>2要素認証（メールベース確認コード）</li>
                <li>分析・レポート（KPIダッシュボード）</li>
            </ul>
        </div>

        <div class="section">
            <h2>💻 技術スタック</h2>
            <div class="tech-stack">
                <div class="tech-item">
                    <h4>フレームワーク</h4>
                    <p>Next.js 14.2.5 (App Router)</p>
                </div>
                <div class="tech-item">
                    <h4>言語</h4>
                    <p>TypeScript 5</p>
                </div>
                <div class="tech-item">
                    <h4>スタイリング</h4>
                    <p>Tailwind CSS 3.4.1</p>
                </div>
                <div class="tech-item">
                    <h4>データベース</h4>
                    <p>Prisma 5.7.0 + SQLite</p>
                </div>
                <div class="tech-item">
                    <h4>認証</h4>
                    <p>JWT + bcryptjs + 2FA</p>
                </div>
                <div class="tech-item">
                    <h4>テスト</h4>
                    <p>Playwright 1.54.2 + Jest 29.7.0</p>
                </div>
                <div class="tech-item">
                    <h4>リアルタイム通信</h4>
                    <p>Socket.io 4.7.5</p>
                </div>
                <div class="tech-item">
                    <h4>ストレージ</h4>
                    <p>AWS S3 (sdk 3.500.0)</p>
                </div>
                <div class="tech-item">
                    <h4>メール送信</h4>
                    <p>SendGrid 8.1.3</p>
                </div>
                <div class="tech-item">
                    <h4>画像処理</h4>
                    <p>Sharp 0.34.4, Jimp 1.6.0</p>
                </div>
                <div class="tech-item">
                    <h4>PDF生成</h4>
                    <p>jsPDF 3.0.1, PDFKit 0.17.1</p>
                </div>
                <div class="tech-item">
                    <h4>動画処理</h4>
                    <p>fluent-ffmpeg 2.1.3</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>📚 引き継ぎに必要な最小ドキュメント</h2>
            <p>本番移行と運用開始に必要なドキュメントのみを掲載しています。</p>

            <div class="doc-grid">
                <div class="doc-card">
                    <h4>📝 引き継ぎメモ</h4>
                    <p>本番移行の必須改修、ブロッカー、環境変数、実装順序を集約</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>⭐ 必読</span>
                    </div>
                    <a href="引き継ぎメモ.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🧭 system-architecture-audit</h4>
                    <p>分離性/データ源/モック挙動の完全監査。表形式で実装と設定を整理</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>📋 監査レポート</span>
                    </div>
                    <a href="system-architecture-audit.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🗺️ system-architecture.drawio</h4>
                    <p>システム全体構成（RepositoryFactory/認証/DB/外部サービス）</p>
                    <div class="doc-meta">
                        <span>📎 図面</span>
                        <span>💡 参照</span>
                    </div>
                    <a href="system-architecture.drawio.pdf" target="_blank">PDFで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🔁 product-status-flow.drawio</h4>
                    <p>商品ライフサイクル/Shipment連携（右側フロー）</p>
                    <div class="doc-meta">
                        <span>📎 図面</span>
                        <span>💡 参照</span>
                    </div>
                    <a href="product-status-flow.drawio.pdf" target="_blank">PDFで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🧩 database-er-diagram.drawio</h4>
                    <p>主要テーブル定義（ProductImage/InspectionChecklist/Order/InventoryMovement整合済み）</p>
                    <div class="doc-meta">
                        <span>📎 図面</span>
                        <span>💡 参照</span>
                    </div>
                    <a href="database-er-diagram.drawio.pdf" target="_blank">PDFで開く</a>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>📋 完全ドキュメント一覧</h2>
            <p>プロジェクトに関する全ドキュメントです。必要に応じて参照してください。</p>

            <div class="doc-grid">
                <div class="doc-card">
                    <h4>📖 README</h4>
                    <p>プロジェクト概要、セットアップ方法、技術スタック</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>⭐ 基本</span>
                    </div>
                    <a href="README.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🔧 技術スタック一覧</h4>
                    <p>技術仕様書v3.0 - 使用技術、実装状況、ディレクトリ構成</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>🔧 技術</span>
                    </div>
                    <a href="技術スタック一覧.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>📋 要件定義書</h4>
                    <p>システム要件v8.0 - ビジネス要件、機能仕様、商品フロー</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>📋 要件</span>
                    </div>
                    <a href="要件定義書.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>⚙️ 開発作業規則</h4>
                    <p>ClaudeCode/Cursor使用時の必須ルール、UIテスト規約</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>⚠️ 必須</span>
                    </div>
                    <a href="開発作業規則.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🎨 UI統一性デザイン指針</h4>
                    <p>Nexusデザインシステムv2.0 - コンポーネント設計、カラーパレット</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>🎨 デザイン</span>
                    </div>
                    <a href="UI統一性デザイン指針.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🔄 Web_アプリ開発フロー</h4>
                    <p>開発ワークフロー、テスト戦略、デプロイメント</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>🔄 プロセス</span>
                    </div>
                    <a href="Web_アプリ開発フロー.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🔀 環境切り替え対応</h4>
                    <p>開発環境 vs 本番環境、モックサービス、環境変数管理</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>🔀 環境</span>
                    </div>
                    <a href="環境切り替え対応.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>⚡ performance-analysis</h4>
                    <p>パフォーマンス分析、最適化結果、ベンチマーク</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>⚡ 性能</span>
                    </div>
                    <a href="performance-analysis.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>🚀 production-deployment-guide</h4>
                    <p>本番環境構築計画、インフラ構成、段階的移行計画</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>🚀 本番</span>
                    </div>
                    <a href="production-deployment-guide.html" target="_blank">HTMLで開く</a>
                </div>

                <div class="doc-card">
                    <h4>📚 README-DOCS</h4>
                    <p>ドキュメント管理方法、HTML生成、更新フロー</p>
                    <div class="doc-meta">
                        <span>📅 最新</span>
                        <span>📚 管理</span>
                    </div>
                    <a href="README-DOCS.html" target="_blank">HTMLで開く</a>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🗂️ プロジェクト構成</h2>
            <pre style="background: var(--bg-light); padding: 20px; border-radius: 8px; overflow-x: auto; line-height: 1.8;">
app/
├── api/                 # API Routes（多数のエンドポイント）
├── billing/             # 請求管理
├── dashboard/           # ダッシュボード
├── delivery/            # 配送管理
├── delivery-plan/       # 納品プラン
├── inventory/           # 在庫管理
├── staff/               # スタッフ用ページ
│   ├── dashboard/       # スタッフダッシュボード
│   ├── inspection/      # 検品画面
│   ├── picking/         # ピッキング作業
│   ├── packaging/       # 梱包作業
│   └── shipping/        # 発送作業
├── components/          # 共通コンポーネント
└── globals.css          # グローバルスタイル

lib/
├── hooks/               # カスタムフック
├── services/            # ビジネスロジック層
│   ├── adapters/        # 外部サービスアダプター
│   └── unified/         # 統合サービス
├── repositories/        # データアクセス層
├── utils/               # ユーティリティ
├── constants/           # 定数定義
└── templates/           # テンプレート

prisma/
├── schema.prisma        # Prismaスキーマ
├── seed.ts              # 初期データ投入
└── dev.db               # SQLite開発DB

docs/                    # プロジェクトドキュメント
            </pre>
        </div>

            <div class="alert alert-warning">
            <strong>⚠️ 重要な注意事項</strong><br>
            • 現在は開発環境（SQLite + モックサービス）で稼働しています<br>
            • 本番環境への移行は未実施です（production-deployment-guide.md参照）<br>
            • E2EテストはPlaywrightで一部実装済み（e2e/ 配下）。不足分は今後拡充が必要<br>
            • Nexusデザインシステムは部分的実装です
            </div>

        <div class="section">
            <h2>🚀 クイックスタート</h2>
            <h3>1. 環境構築</h3>
            <pre style="background: #1e293b; color: #e2e8f0; padding: 20px; border-radius: 8px; overflow-x: auto;">
# 依存関係のインストール
npm install

# 環境変数の設定
cp .env.example .env.local
# .env.localを編集

# データベースのセットアップ
npm run db:generate
npm run db:push
npm run db:seed

# 開発サーバー起動
npm run dev
# http://localhost:3002 で起動
            </pre>

            <h3>2. 主要コマンド</h3>
            <pre style="background: #1e293b; color: #e2e8f0; padding: 20px; border-radius: 8px; overflow-x: auto;">
npm run dev              # 開発サーバー起動 (ポート3002)
npm run build            # プロダクションビルド
npm run start            # プロダクションサーバー起動
npm run test             # E2Eテスト実行
npm run test:unit        # ユニットテスト実行
npm run db:studio        # Prisma Studio起動
            </pre>
        </div>

        <div class="section">
            <h2>👥 ユーザーロール</h2>
            <div class="tech-stack">
                <div class="tech-item">
                    <h4>🔵 Seller（セラー）</h4>
                    <p>商品所有者。在庫確認、出品指示、売上管理、返品管理を行う</p>
                </div>
                <div class="tech-item">
                    <h4>🟢 Staff（スタッフ）</h4>
                    <p>作業者。検品、ピッキング、梱包、発送作業を担当</p>
                </div>
                <div class="tech-item">
                    <h4>🔴 Admin（管理者）</h4>
                    <p>システム管理者。全機能へのアクセス権限、ユーザー管理を行う</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>📞 お問い合わせ・サポート</h2>
            <p>技術的な質問やプロジェクトに関するお問い合わせは、以下のドキュメントを参照してください：</p>
            <ul class="feature-list">
                <li>開発作業規則.md - 開発時の必須ルール</li>
                <li>技術スタック一覧.md - 技術的な詳細情報</li>
                <li>Web_アプリ開発フロー.md - トラブルシューティング</li>
            </ul>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2024-2025 THE WORLD DOOR Inc. All rights reserved.</p>
            <p style="margin-top: 10px; opacity: 0.9;">本ドキュメントは機密情報です。無断での複製・配布を禁じます。</p>
            <p style="margin-top: 10px; opacity: 0.8; font-size: 0.9rem;">最終更新: 2025年10月3日</p>
        </div>
    </footer>
</body>
</html>
