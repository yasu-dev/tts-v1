<mxfile host="app.diagrams.net" modified="2025-10-11T00:00:00.000Z" agent="Claude Code" version="24.0.0">
  <diagram name="MGC-V1 System Architecture" id="system-architecture">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="MGC-V1 献立ガチャサービス&#xa;システムアーキテクチャ図" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="360" y="20" width="450" height="60" as="geometry" />
        </mxCell>

        <!-- Client Layer -->
        <mxCell id="client-layer" value="クライアント層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="1000" height="120" as="geometry" />
        </mxCell>

        <mxCell id="web-browser" value="Webブラウザ&#xa;(Chrome, Firefox, Safari, Edge)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="120" y="140" width="300" height="60" as="geometry" />
        </mxCell>

        <mxCell id="mobile-browser" value="モバイルブラウザ&#xa;(iOS Safari, Chrome Mobile)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="460" y="140" width="300" height="60" as="geometry" />
        </mxCell>

        <mxCell id="future-app" value="将来: ネイティブアプリ&#xa;(予定)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="800" y="140" width="240" height="60" as="geometry" />
        </mxCell>

        <!-- Arrow from Client to Frontend -->
        <mxCell id="arrow-client-frontend" value="HTTPS" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;strokeWidth=2;" edge="1" parent="1" source="client-layer" target="frontend-layer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Frontend Layer -->
        <mxCell id="frontend-layer" value="フロントエンド層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="80" y="260" width="1000" height="160" as="geometry" />
        </mxCell>

        <mxCell id="nextjs-app" value="Next.js 14 App Router" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="300" width="200" height="60" as="geometry" />
        </mxCell>

        <mxCell id="react-components" value="React 18&#xa;コンポーネント" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="340" y="300" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="tailwind" value="Tailwind CSS&#xa;スタイリング" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="540" y="300" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="typescript" value="TypeScript&#xa;型安全性" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="740" y="300" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="ssg-ssr" value="SSG / SSR / ISR&#xa;レンダリング戦略" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="940" y="300" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Arrow from Frontend to Backend -->
        <mxCell id="arrow-frontend-backend" value="API Request" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;strokeWidth=2;" edge="1" parent="1" source="frontend-layer" target="backend-layer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Backend Layer -->
        <mxCell id="backend-layer" value="バックエンド層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="80" y="460" width="1000" height="160" as="geometry" />
        </mxCell>

        <mxCell id="api-routes" value="Next.js API Routes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="500" width="200" height="60" as="geometry" />
        </mxCell>

        <mxCell id="business-logic" value="ビジネスロジック&#xa;(lib/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="340" y="500" width="200" height="60" as="geometry" />
        </mxCell>

        <mxCell id="middleware" value="Middleware&#xa;認証・ロギング" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="560" y="500" width="200" height="60" as="geometry" />
        </mxCell>

        <mxCell id="validation" value="バリデーション&#xa;(Zod)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="780" y="500" width="140" height="60" as="geometry" />
        </mxCell>

        <mxCell id="error-handling" value="エラー&#xa;ハンドリング" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="940" y="500" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Arrow from Backend to Database -->
        <mxCell id="arrow-backend-database" value="SQL Query" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;strokeWidth=2;" edge="1" parent="1" source="backend-layer" target="database-layer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Database Layer -->
        <mxCell id="database-layer" value="データベース層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;verticalAlign=top;align=center;" vertex="1" parent="1">
          <mxGeometry x="80" y="660" width="480" height="120" as="geometry" />
        </mxCell>

        <mxCell id="supabase" value="Supabase&#xa;(PostgreSQL)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="700" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="supabase-auth" value="Supabase Auth&#xa;認証サービス" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="320" y="700" width="120" height="60" as="geometry" />
        </mxCell>

        <mxCell id="supabase-storage" value="Supabase Storage&#xa;ファイル保存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="460" y="700" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- External Services Layer -->
        <mxCell id="external-layer" value="外部サービス層 (予定)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=16;fontStyle=1;verticalAlign=top;align=center;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="600" y="660" width="480" height="120" as="geometry" />
        </mxCell>

        <mxCell id="future-api-1" value="外部API連携&#xa;(未定)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=13;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="640" y="700" width="120" height="60" as="geometry" />
        </mxCell>

        <mxCell id="future-api-2" value="決済サービス&#xa;(未定)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=13;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="780" y="700" width="120" height="60" as="geometry" />
        </mxCell>

        <mxCell id="future-api-3" value="メール送信&#xa;(未定)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=13;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="920" y="700" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Arrow from Backend to External -->
        <mxCell id="arrow-backend-external" value="API Call (将来)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;strokeWidth=1;dashed=1;" edge="1" parent="1" source="backend-layer" target="external-layer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-title" value="凡例" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1140" y="100" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-client" value="クライアント層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1140" y="140" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-frontend" value="フロントエンド層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1140" y="180" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-backend" value="バックエンド層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1140" y="220" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-database" value="データベース層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1140" y="260" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-future" value="将来の予定" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="1140" y="300" width="100" height="30" as="geometry" />
        </mxCell>

        <!-- Notes -->
        <mxCell id="notes" value="備考&#xa;・Supabaseをメインデータベースとして使用&#xa;・認証もSupabase Authを利用予定&#xa;・外部サービス連携は今後の要件に応じて追加" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1140" y="360" width="250" height="120" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
